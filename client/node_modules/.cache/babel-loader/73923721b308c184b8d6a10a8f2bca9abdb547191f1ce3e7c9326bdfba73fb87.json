{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Lakshraj/Documents/mern-project/full-mern-stack-video/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Lakshraj/Documents/mern-project/full-mern-stack-video/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Lakshraj/Documents/mern-project/full-mern-stack-video/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{useNavigate}from'react-router-dom';import jwt_decode from'jwt-decode';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var Dashboard=function Dashboard(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),quote=_useState2[0],setQuote=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),tempQuote=_useState4[0],setTempQuote=_useState4[1];var Navigate=useNavigate();var populateQuote=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var req,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetch('/api/quote',{headers:{'x-access-token':localStorage.getItem('token')}});case 2:req=_context.sent;_context.next=5;return req.json();case 5:data=_context.sent;if(data.status==='add quote...'){setQuote(data.quote);}else{alert(data.error);}case 7:case\"end\":return _context.stop();}},_callee);}));return function populateQuote(){return _ref.apply(this,arguments);};}();useEffect(function(){var token=localStorage.getItem('token');if(token){var user=jwt_decode(token);if(!user){localStorage.removeItem('token');Navigate('/login');}else{populateQuote();}}},[]);var updateQuote=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(event){var req,data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:event.preventDefault();_context2.next=3;return fetch('/api/quote',{method:'POST',headers:{'Content-Type':'application/json','x-access-token':localStorage.getItem('token')},body:JSON.stringify({quote:tempQuote})});case 3:req=_context2.sent;_context2.next=6;return req.json();case 6:data=_context2.sent;if(data.status==='ok'){setQuote(tempQuote);setTempQuote('');}else{alert(data.error);}case 8:case\"end\":return _context2.stop();}},_callee2);}));return function updateQuote(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"dash\",children:[/*#__PURE__*/_jsxs(\"h1\",{style:{color:'white'},children:[\"Your quote: \",quote||'No quote found']}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:updateQuote,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Quote\",value:tempQuote,onChange:function onChange(e){return setTempQuote(e.target.value);},name:\"quote\",className:\"input\"}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Update quote\",className:\"btn1\"})]})]});};export default Dashboard;","map":{"version":3,"names":["React","useEffect","useState","useNavigate","jwt_decode","jsxs","_jsxs","jsx","_jsx","Dashboard","_useState","_useState2","_slicedToArray","quote","setQuote","_useState3","_useState4","tempQuote","setTempQuote","Navigate","populateQuote","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","req","data","wrap","_callee$","_context","prev","next","fetch","headers","localStorage","getItem","sent","json","status","alert","error","stop","apply","arguments","token","user","removeItem","updateQuote","_ref2","_callee2","event","_callee2$","_context2","preventDefault","method","body","JSON","stringify","_x","className","children","style","color","onSubmit","type","placeholder","value","onChange","e","target","name"],"sources":["C:/Users/Lakshraj/Documents/mern-project/full-mern-stack-video/client/src/pages/Dashboard.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport jwt_decode from 'jwt-decode';\r\n\r\nconst Dashboard = () => {\r\n\r\n  const [quote, setQuote] = useState('')\r\n  const [tempQuote, setTempQuote] = useState('')\r\n  const Navigate = useNavigate()\r\n\r\n  const populateQuote =async()=> {\r\n    const req = await fetch('/api/quote', {\r\n        headers: {\r\n            'x-access-token': localStorage.getItem('token'),\r\n        },\r\n    })\r\n\r\n    const data = await req.json()\r\n    if (data.status === 'add quote...') {\r\n        setQuote(data.quote)\r\n    } else {\r\n        alert(data.error)\r\n    }\r\n}\r\n\r\nuseEffect(() => {\r\n  const token = localStorage.getItem('token')\r\n  if (token) {\r\n      const user = jwt_decode(token)\r\n      if (!user) {\r\n          localStorage.removeItem('token')\r\n          Navigate('/login')\r\n      } else {\r\n          populateQuote()\r\n      }\r\n  }\r\n}, [])\r\n\r\nconst updateQuote=async(event) =>{\r\n  event.preventDefault()\r\n\r\n  const req = await fetch('/api/quote', {\r\n      method: 'POST',\r\n      headers: {\r\n          'Content-Type': 'application/json',\r\n          'x-access-token': localStorage.getItem('token'),\r\n      },\r\n      body: JSON.stringify({\r\n          quote: tempQuote,\r\n      }),\r\n  })\r\n\r\n  const data = await req.json()\r\n  if (data.status === 'ok') {\r\n      setQuote(tempQuote)\r\n      setTempQuote('')\r\n  } else {\r\n      alert(data.error)\r\n  }\r\n}\r\n  return (\r\n    <div className='dash'>\r\n      <h1 style={{color:'white'}}>Your quote: {quote || 'No quote found'}</h1>\r\n      <form onSubmit={updateQuote}>\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Quote\"\r\n          value={tempQuote}\r\n          onChange={(e) => setTempQuote(e.target.value)}\r\n          name='quote'\r\n          className='input'\r\n        />\r\n        <input type=\"submit\" value=\"Update quote\"  className='btn1'/>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Dashboard"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}